function applyTheme(){document.body.classList.remove(previousPalette),previousPalette=this.value,document.body.classList.add(this.value),generateCanvas(canvas)}function generateCanvas(e){html2canvas(document.querySelector("#stage"),{backgroundColor:null,canvas:e,scale:1,width:1280,height:720})}function resizeSticky(){stickyWidth=sticky.parentElement.clientWidth,sticky.style.width=stickyWidth+"px"}function updateStage(){stage.classList.remove(previousLayout),previousLayout=this.value,stage.classList.add(this.value),generateCanvas(canvas)}const canvas=document.getElementById("canvas"),darkModeToggle=document.getElementById("toggle"),form=document.getElementById("form"),imageLoader=document.getElementById("input-image"),layoutLogos=document.querySelectorAll(".layout__logo"),layoutSelectors=document.forms.form.elements.layout,logoLoader=document.getElementById("input-logo"),paletteSelectors=document.forms.form.elements.palette,stage=document.getElementById("stage"),sticky=document.querySelector(".sticky"),textInputs=document.querySelectorAll(".input--text");let previousLayout,previousPalette,stickyWidth=sticky.parentElement.clientWidth;sticky.style.width=stickyWidth+"px",darkModeToggle.addEventListener("change",e=>{document.body.classList.toggle("dark-mode")});for(var i=0;i<layoutSelectors.length;i++)layoutSelectors[i].addEventListener("change",updateStage);for(i=0;i<paletteSelectors.length;i++)paletteSelectors[i].addEventListener("change",applyTheme);logoLoader.addEventListener("change",e=>{let t=new FileReader;t.onload=function(e){let t=new Image;t.onload=function(){let e=document.querySelectorAll(".layout__logo"),a="url("+t.src+")";for(var n=0,o=e.length;n<o;n++)e[n].style.backgroundImage=a;generateCanvas(canvas);for(n=0,o=layoutLogos.length;n<o;n++)layoutLogos[n].style.backgroundImage=a},t.src=e.target.result},t.readAsDataURL(e.target.files[0])}),imageLoader.addEventListener("change",e=>{let t=new FileReader;t.onload=function(e){let t=new Image;t.onload=function(){stage.style.backgroundImage="url("+t.src+")",generateCanvas(canvas)},t.src=e.target.result},t.readAsDataURL(e.target.files[0])}),textInputs.forEach(function(e){e.addEventListener("change",e=>{let t=document.querySelectorAll("."+e.target.dataset.target);for(var a=0,n=t.length;a<n;a++)t[a].textContent=e.target.value;generateCanvas(canvas)})}),form.addEventListener("submit",e=>{e.preventDefault();document.getElementById("canvas").toBlob(function(e){saveAs(e,"test.jpg")})}),window.addEventListener("resize",resizeSticky);