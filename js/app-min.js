function applyTheme(){if(previousPalette?document.body.classList.remove(previousPalette):document.body.classList.remove("palette--brando"),previousPalette=this.value,document.body.classList.add(this.value),"palette--custom"===this.value){let e=0;for(let t=0;t<customColours.children.length;t++)e+=customColours.children[t].clientHeight;customColours.style.height=e+"px"}else customColours.style.height=0;generateCanvas(canvas)}function applyCustomTheme(){let e="";for(let t=0;t<customPaletteInputs.length;t++)customPaletteInputs[t].value&&(e+="--"+customPaletteInputs[t].name+": "+customPaletteInputs[t].value+";","colour-1"===this.name&&(e+="--colour-1-30: "+customPaletteInputs[t].value+"4D;",e+="--colour-1-00: "+customPaletteInputs[t].value+"00;"));document.body.setAttribute("style",e),generateCanvas(canvas)}function generateCanvas(e){html2canvas(document.querySelector("#stage"),{backgroundColor:null,canvas:e,scale:1,width:1280,height:720})}function resizeSticky(){stickyWidth=sticky.parentElement.clientWidth,sticky.style.width=stickyWidth+"px"}function updateStage(){stage.classList.remove(previousLayout),previousLayout=this.value,stage.classList.add(this.value),generateCanvas(canvas)}const canvas=document.getElementById("canvas"),customColours=document.getElementById("custom-colours"),customPaletteInputs=document.querySelectorAll(".custom-palette"),darkModeToggle=document.getElementById("toggle"),form=document.getElementById("form"),imageLoader=document.getElementById("input-image"),layoutLogos=document.querySelectorAll(".layout__logo"),layoutSelectors=document.forms.form.elements.layout,logoLoader=document.getElementById("input-logo"),paletteSelectors=document.forms.form.elements.palette,stage=document.getElementById("stage"),sticky=document.querySelector(".sticky"),textInputs=document.querySelectorAll(".input--text");let previousLayout,previousPalette,stickyWidth=sticky.parentElement.clientWidth;sticky.style.width=stickyWidth+"px",darkModeToggle.addEventListener("change",e=>{document.body.classList.toggle("dark-mode")});for(let e=0;e<paletteSelectors.length;e++)paletteSelectors[e].addEventListener("change",applyTheme),e<customPaletteInputs.length&&customPaletteInputs[e].addEventListener("change",applyCustomTheme),e<layoutSelectors.length&&layoutSelectors[e].addEventListener("change",updateStage);logoLoader.addEventListener("change",e=>{let t=new FileReader;t.onload=function(e){let t=new Image;t.onload=function(){let e=document.querySelectorAll(".layout__logo"),a="url("+t.src+")";for(let t=0,o=e.length;t<o;t++)e[t].style.backgroundImage=a;generateCanvas(canvas);for(let e=0,t=layoutLogos.length;e<t;e++)layoutLogos[e].style.backgroundImage=a},t.src=e.target.result},t.readAsDataURL(e.target.files[0])}),imageLoader.addEventListener("change",e=>{let t=new FileReader;t.onload=function(e){let t=new Image;t.onload=function(){stage.style.backgroundImage="url("+t.src+")",generateCanvas(canvas)},t.src=e.target.result},t.readAsDataURL(e.target.files[0])}),textInputs.forEach(function(e){e.addEventListener("change",e=>{let t=document.querySelectorAll("."+e.target.dataset.target);for(let a=0,o=t.length;a<o;a++)t[a].textContent=e.target.value;generateCanvas(canvas)})}),form.addEventListener("submit",e=>{e.preventDefault();document.getElementById("canvas").toBlob(function(e){saveAs(e,"test.jpg")})}),window.addEventListener("resize",resizeSticky);